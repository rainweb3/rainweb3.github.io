# Windows ç³»ç»Ÿä¸‹ Node.jsã€npmã€Yarnã€pnpm å®‰è£…æ›´æ–°å‡çº§æŒ‡å—
æœ¬æ–‡é’ˆå¯¹ Windows ç³»ç»Ÿï¼ˆCMD/PowerShell ç¯å¢ƒï¼‰ï¼Œè¯¦ç»†æ¢³ç† **Node.jsã€npmã€Yarnã€pnpm** çš„**å¸è½½ã€å…¨å±€å®‰è£…/å‡çº§ã€é¡¹ç›®å±€éƒ¨å®‰è£…/å‡çº§**æµç¨‹ï¼Œè§£å†³ç‰ˆæœ¬å†²çªã€ç¯å¢ƒé…ç½®ç­‰å¸¸è§é—®é¢˜ã€‚


## å‰è¨€
- **å·¥å…·å…³ç³»**ï¼šNode.js å†…ç½® npmï¼›Yarn/pnpm æ˜¯æ›¿ä»£ npm çš„åŒ…ç®¡ç†å™¨ï¼Œå¯é€šè¿‡ npm æˆ– Corepackï¼ˆNode.js å†…ç½®å·¥å…·ï¼‰å®‰è£…ã€‚
- **å…¨å±€ vs å±€éƒ¨**ï¼š
  - **å…¨å±€**ï¼šå·¥å…·å®‰è£…åœ¨ç³»ç»Ÿè·¯å¾„ï¼Œå…¨ç³»ç»Ÿå¯ç”¨ï¼ˆå¦‚ `yarn --version` ç›´æ¥è°ƒç”¨ï¼‰ã€‚
  - **å±€éƒ¨**ï¼šå·¥å…·ä»…å®‰è£…åœ¨é¡¹ç›® `node_modules` ä¸­ï¼Œä»…å½“å‰é¡¹ç›®å¯ç”¨ï¼ˆéœ€é€šè¿‡ `npx` æˆ–é¡¹ç›®è„šæœ¬è°ƒç”¨ï¼‰ã€‚
- **æ¨èå·¥å…·**ï¼šç”¨ **nvm-windows** ç®¡ç† Node.js ç‰ˆæœ¬ï¼Œé¿å…å…¨å±€ç‰ˆæœ¬å†²çªã€‚


## ä¸€ã€Node.js ç®¡ç†ï¼ˆæ ¸å¿ƒä¾èµ–ï¼‰
Node.js æ˜¯ npm/Yarn/pnpm çš„è¿è¡ŒåŸºç¡€ï¼Œä¼˜å…ˆé€šè¿‡ **nvm-windows** ç®¡ç†ç‰ˆæœ¬ï¼ˆé¿å…ç›´æ¥å®‰è£…å¯¼è‡´çš„å¸è½½æ®‹ç•™é—®é¢˜ï¼‰ã€‚


### 1. å¸è½½æ—§ç‰ˆ Node.js
#### 1.1 å¸è½½â€œç›´æ¥å®‰è£…çš„ Node.jsâ€ï¼ˆé nvm ç®¡ç†ï¼‰
1. æ‰“å¼€ **æ§åˆ¶é¢æ¿ â†’ ç¨‹åºå’ŒåŠŸèƒ½**ï¼Œæ‰¾åˆ°â€œNode.jsâ€ï¼Œå³é”®å¸è½½ï¼›
2. æ¸…ç†æ®‹ç•™æ–‡ä»¶ï¼š
   ```cmd
   # åˆ é™¤ Node å®‰è£…ç›®å½•ï¼ˆé»˜è®¤è·¯å¾„ï¼Œæ ¹æ®å®é™…å®‰è£…ä½ç½®è°ƒæ•´ï¼‰
   rmdir /s /q "C:\Program Files\nodejs"
   # åˆ é™¤ç”¨æˆ·çº§ç¼“å­˜å’Œé…ç½®
   rmdir /s /q "%USERPROFILE%\AppData\Roaming\npm"
   rmdir /s /q "%USERPROFILE%\AppData\Roaming\npm-cache"
   rmdir /s /q "%USERPROFILE%\.node-gyp"
   ```
3. é‡å¯ CMD éªŒè¯ï¼š`node --version` æç¤ºâ€œå‘½ä»¤ä¸å­˜åœ¨â€å³æˆåŠŸã€‚

#### 1.2 å¸è½½â€œnvm-windows ç®¡ç†çš„ Node.jsâ€
æ— éœ€æ‰‹åŠ¨å¸è½½ï¼Œé€šè¿‡ nvm å‘½ä»¤åˆ‡æ¢/åˆ é™¤ç‰ˆæœ¬å³å¯ï¼š
```cmd
# æŸ¥çœ‹å·²å®‰è£…çš„ Node ç‰ˆæœ¬
nvm list
# åˆ é™¤æŒ‡å®šç‰ˆæœ¬ï¼ˆå¦‚ 22.17.1ï¼‰
nvm uninstall 22.17.1
```


### 2. å…¨å±€å®‰è£…/å‡çº§ Node.jsï¼ˆnvm-windows æ¨èï¼‰
#### 2.1 å®‰è£… nvm-windowsï¼ˆç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼‰
1. ä¸‹è½½æœ€æ–°ç‰ˆ nvm-windowsï¼š[GitHub  Releases](https://github.com/coreybutler/nvm-windows/releases)ï¼ˆé€‰æ‹© `nvm-setup.exe`ï¼‰ï¼›
2. åŒå‡»å®‰è£…ï¼ŒæŒ‰æç¤ºé€‰æ‹©å®‰è£…è·¯å¾„ï¼ˆå»ºè®®é»˜è®¤ `C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Roaming\nvm`ï¼‰ï¼›
3. éªŒè¯å®‰è£…ï¼š
   ```cmd
   nvm version  # è¾“å‡º nvm ç‰ˆæœ¬å³æˆåŠŸ
   ```

#### 2.2 ç”¨ nvm å®‰è£…/å‡çº§ Node.js
```cmd
# 1. æŸ¥çœ‹å¯å®‰è£…çš„ Node ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
nvm list available
# 2. å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆå¦‚ LTS ç‰ˆ 20.17.0 æˆ–æœ€æ–°ç‰ˆ 22.17.1ï¼‰
nvm install 20.17.0
# 3. åˆ‡æ¢åˆ°å·²å®‰è£…ç‰ˆæœ¬ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼‰
nvm use 20.17.0
# 4. éªŒè¯ç‰ˆæœ¬
node --version  # è¾“å‡º 20.17.0 å³æˆåŠŸ
```

> âš ï¸ æ³¨æ„ï¼šåˆ‡æ¢ç‰ˆæœ¬æ—¶éœ€ä»¥ **ç®¡ç†å‘˜èº«ä»½è¿è¡Œ CMD**ï¼Œå¦åˆ™å¯èƒ½æç¤ºâ€œæƒé™ä¸è¶³â€ã€‚


### 3. é¡¹ç›®å±€éƒ¨ Node.js ç‰ˆæœ¬ï¼ˆä»…å½“å‰é¡¹ç›®ç”Ÿæ•ˆï¼‰
Node.js é€šå¸¸ä¸â€œå±€éƒ¨å®‰è£…â€ï¼Œä½†å¯é€šè¿‡ **.nvmrc æ–‡ä»¶** çº¦æŸé¡¹ç›®çš„ Node ç‰ˆæœ¬ï¼š
1. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.nvmrc` æ–‡ä»¶ï¼Œå†™å…¥ç›®æ ‡ç‰ˆæœ¬ï¼š
   ```txt
   20.17.0  # é¡¹ç›®è¦æ±‚çš„ Node ç‰ˆæœ¬
   ```
2. è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œè‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬ï¼š
   ```cmd
   nvm use  # ä¼šè¯»å– .nvmrc å¹¶åˆ‡æ¢åˆ°å¯¹åº”ç‰ˆæœ¬
   ```


## äºŒã€npm ç®¡ç†ï¼ˆNode.js å†…ç½®ï¼‰
npm éš Node.js è‡ªåŠ¨å®‰è£…ï¼Œæ— éœ€å•ç‹¬å…¨å±€å®‰è£…ï¼Œé‡ç‚¹å…³æ³¨ **å‡çº§** å’Œ **å±€éƒ¨ç‰ˆæœ¬æ§åˆ¶**ã€‚


### 1. å¸è½½ npm
npm æ— æ³•å•ç‹¬å¸è½½ï¼ˆä¾èµ– Node.jsï¼‰ï¼Œè‹¥éœ€é‡ç½® npmï¼Œå¯ï¼š
1. å‡çº§ Node.js åˆ°æœ€æ–°ç‰ˆï¼ˆä¼šè‡ªå¸¦æœ€æ–° npmï¼‰ï¼›
2. æ¸…ç† npm ç¼“å­˜ï¼š
   ```cmd
   npm cache clean --force
   ```


### 2. å…¨å±€å‡çº§ npm
```cmd
# å‡çº§ npm åˆ°æœ€æ–°ç¨³å®šç‰ˆ
npm install -g npm@latest
# éªŒè¯ç‰ˆæœ¬
npm --version  # è¾“å‡ºæœ€æ–°ç‰ˆï¼ˆå¦‚ 10.9.2ï¼‰å³æˆåŠŸ
```


### 3. é¡¹ç›®å±€éƒ¨å®‰è£…/å‡çº§ npm
ä»…åœ¨å½“å‰é¡¹ç›®ä¸­ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„ npmï¼ˆé¿å…å½±å“å…¨å±€ï¼‰ï¼š
```cmd
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ä½ çš„é¡¹ç›®è·¯å¾„
# 2. å±€éƒ¨å®‰è£…æŒ‡å®šç‰ˆæœ¬ npmï¼ˆå†™å…¥ devDependenciesï¼‰
npm install npm@10.8.0 --save-dev
# 3. éªŒè¯å±€éƒ¨ç‰ˆæœ¬ï¼ˆéœ€é€šè¿‡ npx è°ƒç”¨ï¼‰
npx npm --version  # è¾“å‡º 10.8.0 å³æˆåŠŸ
```

> ğŸ’¡ ç”¨æ³•ï¼šå±€éƒ¨ npm å¯é€šè¿‡ `npx npm <å‘½ä»¤>` æ‰§è¡Œï¼ˆå¦‚ `npx npm install` å®‰è£…é¡¹ç›®ä¾èµ–ï¼‰ã€‚


## ä¸‰ã€Yarn ç®¡ç†ï¼ˆæ›¿ä»£ npm çš„åŒ…ç®¡ç†å™¨ï¼‰
Yarn åˆ†ä¸º **1.xï¼ˆClassicï¼‰** å’Œ **2+ï¼ˆBerryï¼‰** ä¸¤ä¸ªç³»åˆ—ï¼š1.x å¯é€šè¿‡ npm å®‰è£…ï¼Œ2+ æ¨èé€šè¿‡ Corepackï¼ˆNode.js å†…ç½®ï¼‰ç®¡ç†ã€‚


### 1. å¸è½½ Yarn
#### 1.1 å¸è½½â€œnpm å…¨å±€å®‰è£…çš„ Yarn 1.xâ€
```cmd
npm uninstall -g yarn
# æ¸…ç†æ®‹ç•™ç¼“å­˜
rmdir /s /q "%USERPROFILE%\AppData\Local\Yarn"
rmdir /s /q "%USERPROFILE%\AppData\Roaming\Yarn"
```

#### 1.2 å¸è½½â€œCorepack ç®¡ç†çš„ Yarn 2+â€
```cmd
# ç¦ç”¨ Corepack å¯¹ Yarn çš„ç®¡ç†
corepack disable yarn
# æ¸…ç† Corepack ç¼“å­˜
rmdir /s /q "%USERPROFILE%\.cache\node\corepack"
```


### 2. å…¨å±€å®‰è£…/å‡çº§ Yarn
#### 2.1 æ–¹æ¡ˆ Aï¼šnpm å®‰è£… Yarn 1.xï¼ˆå…¼å®¹æ€§æœ€ä½³ï¼‰
```cmd
# 1. å…¨å±€å®‰è£… Yarn 1.x æœ€æ–°ç‰ˆ
npm install -g yarn
# 2. éªŒè¯ç‰ˆæœ¬
yarn --version  # è¾“å‡º 1.22.22 å³æˆåŠŸ
# 3. å‡çº§ Yarn 1.xï¼ˆå¦‚éœ€ï¼‰
npm upgrade -g yarn
```

#### 2.2 æ–¹æ¡ˆ Bï¼šCorepack ç®¡ç† Yarn 2+ï¼ˆæ¨è 4.xï¼‰
Corepack æ˜¯ Node.js 16.13+ å†…ç½®çš„åŒ…ç®¡ç†å™¨ç®¡ç†å·¥å…·ï¼Œæ— éœ€å•ç‹¬å®‰è£…ï¼š
```cmd
# 1. å¯ç”¨ Corepack
corepack enable
# 2. å‡†å¤‡å¹¶æ¿€æ´» Yarn 4.x æœ€æ–°ç‰ˆï¼ˆå¦‚ 4.9.4ï¼‰
corepack prepare yarn@4.9.4 --activate
# 3. å…¨å±€å¯ç”¨ Yarn
corepack enable yarn
# 4. éªŒè¯ç‰ˆæœ¬ï¼ˆé‡å¯ CMD åï¼‰
yarn --version  # è¾“å‡º 4.9.4 å³æˆåŠŸ
```

> âš ï¸ æ³¨æ„ï¼šè‹¥æç¤ºâ€œç½‘ç»œè¶…æ—¶â€ï¼Œé…ç½®å›½å†…é•œåƒï¼š
> ```cmd
> yarn config set registry https://registry.npmmirror.com
> ```


### 3. é¡¹ç›®å±€éƒ¨å®‰è£…/å‡çº§ Yarn
#### 3.1 å±€éƒ¨å®‰è£… Yarn 1.x
```cmd
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ä½ çš„é¡¹ç›®è·¯å¾„
# 2. å±€éƒ¨å®‰è£… Yarn 1.22.22
npm install yarn@1.22.22 --save-dev
# 3. éªŒè¯å±€éƒ¨ç‰ˆæœ¬
npx yarn --version  # è¾“å‡º 1.22.22 å³æˆåŠŸ
```

#### 3.2 å±€éƒ¨åˆ‡æ¢ Yarn 2+ï¼ˆCorepackï¼‰
åœ¨é¡¹ç›®å†…ç‹¬ç«‹ä½¿ç”¨ Yarn 4.xï¼Œä¸å½±å“å…¨å±€ï¼š
```cmd
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ä½ çš„é¡¹ç›®è·¯å¾„
# 2. åˆå§‹åŒ–é¡¹ç›®ï¼ˆç”Ÿæˆ package.jsonï¼‰
npm init -y
# 3. ç”¨ Corepack æ¿€æ´»é¡¹ç›®å†… Yarn 4.9.4
corepack prepare yarn@4.9.4 --activate
# 4. éªŒè¯å±€éƒ¨ç‰ˆæœ¬
yarn --version  # è¾“å‡º 4.9.4 å³æˆåŠŸï¼ˆä»…å½“å‰é¡¹ç›®ç”Ÿæ•ˆï¼‰
```


## å››ã€pnpm ç®¡ç†ï¼ˆé«˜æ€§èƒ½åŒ…ç®¡ç†å™¨ï¼‰
pnpm ä»¥â€œèŠ‚çœç£ç›˜ç©ºé—´ã€å¿«é€Ÿå®‰è£…â€ä¸ºç‰¹ç‚¹ï¼Œå®‰è£…æ–¹å¼ä¸ Yarn ç±»ä¼¼ï¼Œæ”¯æŒ npm å’Œ Corepack ä¸¤ç§æ–¹å¼ã€‚


### 1. å¸è½½ pnpm
#### 1.1 å¸è½½â€œnpm å…¨å±€å®‰è£…çš„ pnpmâ€
```cmd
npm uninstall -g pnpm
# æ¸…ç†æ®‹ç•™ç¼“å­˜
rmdir /s /q "%USERPROFILE%\.pnpm-store"
rmdir /s /q "%USERPROFILE%\AppData\Local\pnpm"
```

#### 1.2 å¸è½½â€œCorepack ç®¡ç†çš„ pnpmâ€
```cmd
corepack disable pnpm
rmdir /s /q "%USERPROFILE%\.cache\node\corepack"
```


### 2. å…¨å±€å®‰è£…/å‡çº§ pnpm
#### 2.1 æ–¹æ¡ˆ Aï¼šnpm å®‰è£… pnpm
```cmd
# 1. å…¨å±€å®‰è£… pnpm æœ€æ–°ç‰ˆ
npm install -g pnpm
# 2. éªŒè¯ç‰ˆæœ¬
pnpm --version  # è¾“å‡ºæœ€æ–°ç‰ˆï¼ˆå¦‚ 9.7.1ï¼‰å³æˆåŠŸ
# 3. å‡çº§ pnpm
pnpm add -g pnpm
```

#### 2.2 æ–¹æ¡ˆ Bï¼šCorepack ç®¡ç† pnpm
```cmd
# 1. å¯ç”¨ Corepack
corepack enable
# 2. å‡†å¤‡å¹¶æ¿€æ´» pnpm 9.7.1
corepack prepare pnpm@9.7.1 --activate
# 3. å…¨å±€å¯ç”¨ pnpm
corepack enable pnpm
# 4. éªŒè¯ç‰ˆæœ¬ï¼ˆé‡å¯ CMD åï¼‰
pnpm --version  # è¾“å‡º 9.7.1 å³æˆåŠŸ
```


### 3. é¡¹ç›®å±€éƒ¨å®‰è£…/å‡çº§ pnpm
```cmd
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd ä½ çš„é¡¹ç›®è·¯å¾„
# 2. å±€éƒ¨å®‰è£… pnpm 9.7.1
npm install pnpm@9.7.1 --save-dev
# 3. éªŒè¯å±€éƒ¨ç‰ˆæœ¬
npx pnpm --version  # è¾“å‡º 9.7.1 å³æˆåŠŸ
```


## äº”ã€å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹
### 1. ç‰ˆæœ¬å†²çªï¼šå…¨å±€ vs å±€éƒ¨
- ä¼˜å…ˆé€šè¿‡ `npx <å·¥å…·å> --version` ç¡®è®¤å±€éƒ¨ç‰ˆæœ¬ï¼Œé¿å…å…¨å±€ç‰ˆæœ¬å¹²æ‰°ï¼›
- ä¾‹ï¼š`npx yarn --version` æ˜¾ç¤ºé¡¹ç›®å±€éƒ¨ Yarn ç‰ˆæœ¬ï¼Œ`yarn --version` æ˜¾ç¤ºå…¨å±€ç‰ˆæœ¬ã€‚

### 2. ç½‘ç»œè¶…æ—¶ï¼šé…ç½®å›½å†…é•œåƒ
```cmd
# npm é•œåƒ
npm config set registry https://registry.npmmirror.com
# Yarn é•œåƒ
yarn config set registry https://registry.npmmirror.com
# pnpm é•œåƒ
pnpm config set registry https://registry.npmmirror.com
```

### 3. å‘½ä»¤ä¸ç”Ÿæ•ˆï¼šé‡å¯ç»ˆç«¯
å®‰è£…/å‡çº§åéœ€ **å…³é—­å½“å‰ CMD å¹¶é‡æ–°æ‰“å¼€**ï¼Œç¡®ä¿ç¯å¢ƒå˜é‡æ›´æ–°ã€‚

### 4. æƒé™é—®é¢˜ï¼šç®¡ç†å‘˜èº«ä»½è¿è¡Œ
æ‰§è¡Œ `nvm use`ã€`corepack enable` ç­‰å‘½ä»¤æ—¶ï¼Œéœ€ä»¥ **ç®¡ç†å‘˜èº«ä»½è¿è¡Œ CMD**ï¼ˆå³é”® CMD â†’ ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰ã€‚


## å…­ã€å·¥å…·ç‰ˆæœ¬å¯¹åº”è¡¨ï¼ˆæ¨èç»„åˆï¼‰
| Node.js ç‰ˆæœ¬ | npm ç‰ˆæœ¬ï¼ˆå†…ç½®ï¼‰ | Yarn æ¨èç‰ˆæœ¬ | pnpm æ¨èç‰ˆæœ¬ |
|--------------|------------------|---------------|---------------|
| 20.17.0ï¼ˆLTSï¼‰ | 10.8.2           | 1.22.22 / 4.9.4 | 9.7.1         |
| 22.17.1ï¼ˆæœ€æ–°ï¼‰ | 10.9.2           | 1.22.22 / 4.9.4 | 9.7.1         |

é€šè¿‡ä»¥ä¸Šæµç¨‹ï¼Œå¯å®ç° Windows ç³»ç»Ÿä¸‹ Node.jsã€npmã€Yarnã€pnpm çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œé¿å…ç‰ˆæœ¬å†²çªå’Œç¯å¢ƒé…ç½®é—®é¢˜ã€‚
